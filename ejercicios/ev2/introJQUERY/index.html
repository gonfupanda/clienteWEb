<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <style>
        body{
            background-color: darkgrey;
        }
        .cuerpo{

            justify-content: center;
            width: 600px;
            text-align: center;
            margin-left: 25%;
            margin-top: 5%;
            
        }
        input[type=text]{
            border-right: 50%;
            border-left: 50%;
        }
    </style>
</head>
<body id="body">
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js">//Necesario para poder usar JQUERY</script>
    <script>
        $(document).ready(function() {});//Instrucci√≥n de espera de la carga de todo el documento
        auto=[];

    </script>
    <div class="cuerpo">
        <div class="form-floating mb-3">
           <input type="text" class="form-control campo" id="nif" placeholder="NIF">
           <label for="floatingInput">NIF</label>
        </div>
       <div class="ocultos">
           <div class="form-floating mb-3">
               <input type="text" class="form-control campo" id="nombre" placeholder="Nombre">
               <label for="floatingInput">Nombre</label>
           </div>
           <div class="form-floating mb-3">
               <input type="text" class="form-control campo" id="ape" placeholder="Apellidos">
               <label for="floatingInput">Apellidos</label>
           </div>
       </div>
       <!--botones-->
        <input type="button" class="btn btn-primary" value="Iniciar" id="continuar" onclick="comprobar()">
        <br><br><di>-------------------- O ---------------------</di><br><br>
        <input type="button" class="btn btn-primary ocultos" value="Registrarse" id="regi">
   
        <div class="form-check form-switch"><!--switch-->
           <input class="form-check-input" type="checkbox" role="switch" id="cambio" checked>
        </div>
    </div>
    <script type="text/javascript">
        $(".ocultos").hide(0);
        $("#nif").focus();
        //$(".ocultos").show(1000);
        $(".cuerpo").prepend("<h1 id=\"titulo\">Iniciar Sesion</h1>");

        function valido(){
            let valido=true;
            let nombre=$("#nombre").val();
            let ape=$("#ape").val();
            if(nombre==""){
                valido=false;
                alert("Nombre incorrecto");
            }else if(ape==""){
                valido=false;
                alert("apellidos incorrecto");
            }
            return valido;
        }

        function comprobar(){
            let niff=$("#nif").val();
            let valido=true;
            if(!(/[A-Z]{1}[1-9]{3}/.test(niff))){
                valido=false;
                alert("NIF incorrecto");
            }
            if(valido){
                let esta=false;
                auto.forEach(element => {
                    if(element==nif){
                        console.log("encontrado");
                        esta=true;
                    }
                });
            if(esta){
                alert("Bienvenido: "+nif);
            }else{
                $("#continuar").hide(500);
                $(".ocultos").show(1000);
                $("#nif").prop("disabled",true);
                $("#titulo").text("Registrarse");
                $("#nombre").focus();
            }

            }
            
        }
       
        $("#regi").click(function(){
            let bn=valido();
            if(bn){
                auto.push($("#nif").val());
                $("#continuar").show(500);
                $(".ocultos").hide(1000);
                //$(".cuerpo").text("");//.text()//demasiado radical//borra hasta los inputs
                $(".campo").val("");
                $("#titulo").text("Iniciar Sesion");
                $("#nif").prop("disabled",false);
                $("#nif").focus();
            }
            
        });       
        
        let a=function oscuro(){
            document.getElementById("body").style.backgroundColor="black";
            document.getElementById("body").style.color="white";
        }
        
        let b=function claro(){
            document.getElementById("body").style.backgroundColor="white";
            document.getElementById("body").style.color="black";
        }
        
        $("#switch").click(function(){
            $("#body").toggleClass(claro);
            $("#body").toggleClass(oscuro);
        });
        //$(document).ready(function(){$("#cambio").toggleClass()});//esto deberia cambiar la funcion segun el estado

    </script>
</body> 
</html>